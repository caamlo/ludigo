<div class="container mt-3">

  <%= render 'shared/searchbar' %>

  <h1>Liste d'activitÃ©s</h1>

  <div class="container mt-4">
    <% if @activities.any? %>
      <div class="d-grid gap-4" style="grid-template-columns: repeat(auto-fit, minmax(20rem, 1fr)); max-width: 1000px; margin: auto; justify-content: center;">
        <% @activities.each do |activity| %>
          <div class="card activity-card" style="width: 20rem; margin: auto;">

              <!-- Zone indÃ©pendante pour le cÅ“ur en haut de la carte -->
              <div class="favorite-container">
                <%= link_to toggle_activity_favorites_path(activity),
                            data: { turbo_method: :post },
                            id: "favorite_button_#{activity.id}",
                            class: "favorite-button" do %>
                  <% if current_user.favorites.exists?(activity: activity) %>
                    <i class="fa-solid fa-heart text-danger"></i>
                  <% else %>
                    <i class="fa-regular fa-heart text-danger"></i>
                  <% end %>
                <% end %>
              </div>

               <div class="card-body">

              <!-- Image de l'activitÃ© -->
              <div class="image-container">
                <%= link_to activity_path(activity) do %>
                  <% if activity.photo.attached? %>
                    <%= cl_image_tag activity.photo.key, alt: "AI-generated image of the activity", class: "card-img-top" %>
                  <% else %>
                    <%= image_tag "board-game.png", alt: "Default image for activity", class: "card-img-top" %>
                  <% end %>
                <% end %>
              </div>

              <!-- Nom de l'activitÃ© -->
              <h2 class="title"><%= activity.name %></h2>


              <!-- IcÃ´nes de l'activitÃ© -->
              <div class="activity-icons d-flex justify-content-center gap-3 mt-3">
                <div class="circle">
                  <%= image_tag activity.image_for_setting, alt: activity.setting, class: "activity-icon" %>
                </div>
                <div class="duration-container circle">
                  <%= activity.formatted_duration %>
                  <span class="break-min">min</span>
                </div>
                <div class="circle"><%= activity.formatted_age %></div>
              </div>

              <!-- Description -->
              <div class="activity-card-description mt-3">
               <%= link_to activity_path(activity), class: "text-decoration-none" do %>
                <p class="card-text"><%= activity.description[0..110] %> <strong>... afficher plus</strong> </p>
                <% end %>
              </div>

            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="text-center mt-3">ðŸ‘€ Sorry, there are no results for your query.</p>
    <% end %>
  </div>
</div>
